<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.text.TextFlow?>
<?import javafx.scene.text.Text?>
<StackPane fx:id="buildingPane" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.progetto.client.gui.BuildingView">

    <stylesheets>
        <URL value="@style/style.css" />
    </stylesheets>

    <ScrollPane fx:id="buildingScrollPane" fitToWidth="true" fitToHeight="true" vbarPolicy="AS_NEEDED" hbarPolicy="AS_NEEDED">
        <BorderPane maxHeight="Infinity" maxWidth="Infinity" fx:id="buildingBorderPane">

            <left>
                <VBox alignment="CENTER" minWidth="345.0" spacing="15" BorderPane.alignment="CENTER">
                    <VBox fx:id="playerListViewContainer" alignment="TOP_CENTER" spacing="20" VBox.vgrow="ALWAYS">
                        <Label fx:id="activePlayersLabel" text="Players" />
                        <ListView fx:id="playerListView" maxHeight="Infinity" VBox.vgrow="ALWAYS" />

                        <VBox.margin>
                            <Insets bottom="15.0" />
                        </VBox.margin>
                    </VBox>

                    <Button fx:id="buildingReadyButton" minHeight="34.0" minWidth="157.0" onAction="#placeHandComponentAndReady" text="Ready"></Button>
                </VBox>
            </left>

            <right>
                <VBox alignment="CENTER" minWidth="345.0" BorderPane.alignment="CENTER" VBox.vgrow="ALWAYS">
                    <VBox fx:id="discardedComponentsListWrapper" alignment="TOP_CENTER" spacing="20" VBox.vgrow="ALWAYS" maxWidth="345.0">
                        <Label fx:id="buildingSectionTitle" text="Discarded components" wrapText="true" />
                        <ScrollPane fx:id="discardedComponentsScrollPane"
                                    maxWidth="345.0"
                                    hbarPolicy="NEVER"
                                    vbarPolicy="AS_NEEDED"
                                    VBox.vgrow="ALWAYS">
                            <GridPane fx:id="discardedComponentsList"
                                      alignment="TOP_CENTER"
                                      hgap="10"
                                      vgap="10"
                                      maxWidth="345.0"
                                      VBox.vgrow="ALWAYS" />
                        </ScrollPane>

                        <VBox.margin>
                            <Insets bottom="40.0" />
                        </VBox.margin>
                    </VBox>

                    <ImageView fx:id="trash" fitHeight="150" fitWidth="150" />
                </VBox>
            </right>

            <center>
                <VBox spacing="20" alignment="CENTER">
                    <HBox fx:id="timerContainer" spacing="40" alignment="CENTER">
                        <VBox fx:id="flipsContainer" alignment="CENTER">
                            <TextFlow fx:id="remainingFlipsFlow">
                                <Text text="Remaining flips: " styleClass="flips-text" />
                                <Text fx:id="remainingFlipsNumber" text="2" styleClass="flips-number" />
                            </TextFlow>
                        </VBox>

                        <Label fx:id="timerLabel" text="00:00" />
                        <Button fx:id="timerButton" onAction="#resetTimer" text="Flip Timer" />

                        <HBox spacing="10">
                            <Button fx:id="buildShip1Button" text="Ship 1"></Button>
                            <Button fx:id="buildShip2Button" text="Ship 2"></Button>
                        </HBox>
                    </HBox>

                    <VBox BorderPane.alignment="CENTER" VBox.vgrow="ALWAYS" spacing="20" alignment="CENTER" style="-fx-padding: 25px">
                        <Label fx:id="buildingMainTitle" text="BUILD YOUR SPACESHIP!" wrapText="true" />

                        <Region prefHeight="5.0"></Region>

                        <StackPane alignment="CENTER">
                            <ImageView fx:id="spaceShipImage" fitHeight="443.0" fitWidth="606.0" preserveRatio="true" style="-fx-border-radius: 8; -fx-background-radius: 8" />
                            <GridPane fx:id="spaceshipMatrix" alignment="CENTER" hgap="1.0" vgap="1.0" />
                            <GridPane fx:id="bookedArray" alignment="CENTER" maxHeight="80.0" maxWidth="161.0" translateX="209" translateY="-165">
                                <Pane prefHeight="80.0" prefWidth="80.0" GridPane.columnIndex="0" />
                                <Pane prefHeight="80.0" prefWidth="80.0" GridPane.columnIndex="1" />
                            </GridPane>
                        </StackPane>

                        <HBox fx:id="eventCardBox" alignment="CENTER" spacing="30">
                            <ImageView fx:id="deck0Image" fitHeight="135" fitWidth="88" style="-fx-border-radius: 8; -fx-background-radius: 8" />
                            <ImageView fx:id="deck1Image" fitHeight="135" fitWidth="88" style="-fx-border-radius: 8; -fx-background-radius: 8" />
                            <ImageView fx:id="deck2Image" fitHeight="135" fitWidth="88" style="-fx-border-radius: 8; -fx-background-radius: 8" />
                        </HBox>
                    </VBox>

                    <VBox alignment="CENTER">
                        <HBox alignment="CENTER" spacing="10">
                            <ImageView fx:id="componentDeck" fitHeight="150" fitWidth="150" />
                            <Region prefWidth="40.0"></Region>
                            <Pane fx:id="handComponentBox" minWidth="80.0" minHeight="80.0" maxWidth="80.0" maxHeight="80.0" ></Pane>
                            <Region prefWidth="40.0"></Region>
                            <ImageView fx:id="rotateButton" fitHeight="80" fitWidth="80" />
                            <Region prefWidth="65.0"></Region>
                        </HBox>
                    </VBox>
                </VBox>
            </center>

        </BorderPane>
    </ScrollPane>

    <!-- Event card display -->
    <HBox fx:id="eventCardDisplay" alignment="CENTER" mouseTransparent="true" onMouseClicked="#putDownDeck" spacing="10" visible="false" StackPane.alignment="CENTER">
        <HBox fx:id="eventCardContainer" alignment="CENTER" spacing="25" />
    </HBox>

    <!-- Freeze -->
    <VBox fx:id="freezePane" alignment="CENTER" mouseTransparent="true" spacing="50" visible="false" StackPane.alignment="CENTER" >
        <Label fx:id="freezeTitle" text="You are alone in the game..." />
        <Label fx:id="freezeTimer" text="" />
        <Label fx:id="freezeDesc" text="Waiting for other players to reconnect, otherwise you will win..." />
    </VBox>

</StackPane>